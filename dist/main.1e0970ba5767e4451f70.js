(self.webpackChunkbabylon_react_916_canvas=self.webpackChunkbabylon_react_916_canvas||[]).push([[792],{4632:(e,t,n)=>{"use strict";var o=n(85072),i=n.n(o),a=n(97825),s=n.n(a),r=n(77659),l=n.n(r),c=n(55056),d=n.n(c),u=n(10540),p=n.n(u),f=n(41113),g=n.n(f),m=n(11249),h={};h.styleTagTransform=g(),h.setAttributes=d(),h.insert=l().bind(null,"head"),h.domAPI=s(),h.insertStyleElement=p(),i()(m.A,h),m.A&&m.A.locals&&m.A.locals;var v=n(11964);n(57792);const b={Idle:[0,88],Run:[89,109],Strafe_L:[182,201],Strafe_R:[202,221]};function x(e,t){const[n,o]=b[e];return{start:n,end:o,loop:!0,scroll:t}}const y={Idle:x("Idle",0),Run:x("Run",55),Slide:{start:110,end:154,loop:!1,scroll:55},Jump:{start:155,end:181,loop:!1,scroll:55,allowStrafe:!1},Strafe_L:x("Strafe_L",55),Strafe_R:x("Strafe_R",55),Run_Idle:{start:222,end:248,loop:!1,scroll:0},Fall:{start:249,end:324,loop:!1,scroll:0,allowStrafe:!1},Getup:{start:325,end:552,loop:!1,scroll:0,allowStrafe:!1},Death:{start:249,end:324,loop:!1,scroll:0,allowStrafe:!1}},w=new Set(["Slide","Jump","Fall","Getup","Death"]);var S=n(96540);const M=e=>{let t;const n=new Set,o=(e,o)=>{const i="function"==typeof e?e(t):e;if(!Object.is(i,t)){const e=t;t=(null!=o?o:"object"!=typeof i||null===i)?i:Object.assign({},t,i),n.forEach(n=>n(t,e))}},i=()=>t,a={setState:o,getState:i,getInitialState:()=>s,subscribe:e=>(n.add(e),()=>n.delete(e))},s=t=e(o,i,a);return a},C=e=>e,P=e=>{const t=(e=>e?M(e):M)(e),n=e=>function(e,t=C){const n=S.useSyncExternalStore(e.subscribe,S.useCallback(()=>t(e.getState()),[e,t]),S.useCallback(()=>t(e.getInitialState()),[e,t]));return S.useDebugValue(n),n}(t,e);return Object.assign(n,t),n},I={coinCount:0,score:0,lives:3,gameState:"idle",isLoading:!0,showIntroScreen:!0,countdownValue:null,matchDuration:60,matchTimeRemaining:60,isMatchTimerActive:!1,activePowerUps:[]},R=(z=e=>Object.assign(Object.assign({},I),{updateCoinCount:t=>e({coinCount:t}),incrementCoinCount:t=>e(e=>({coinCount:e.coinCount+t})),resetCoinCount:()=>e({coinCount:0}),decrementLives:()=>e(e=>{const t=Math.max(0,e.lives-1),n=t<=0?"gameover":e.gameState;return console.log(`‚ù§Ô∏è Lives: ${t} | Game State: ${n}`),{lives:t,gameState:n}}),setLives:t=>e({lives:Math.max(0,t)}),addScore:t=>e(e=>({score:e.score+t})),setGameState:t=>{console.log(`üéÆ Game State: ${t}`),e({gameState:t})},activatePowerUp:(t,n)=>e(e=>{const o=Date.now()+n,i={type:t,expiresAt:o},a=e.activePowerUps.filter(e=>e.type!==t);return console.log(`‚ö° Power-up activated: ${t} (expires in ${n}ms)`),{activePowerUps:[...a,i]}}),deactivatePowerUp:t=>e(e=>({activePowerUps:e.activePowerUps.filter(e=>e.type!==t)})),setLoading:t=>{console.log(`‚è≥ Loading: ${t}`),e({isLoading:t})},dismissIntroScreen:()=>{console.log("üé¨ Intro screen dismissed"),e({showIntroScreen:!1})},setCountdown:t=>{e({countdownValue:t})},startMatchTimer:()=>{e(e=>({isMatchTimerActive:!0,matchTimeRemaining:e.matchDuration})),console.log("‚è±Ô∏è Match timer started")},tickMatchTimer:t=>e(e=>{if(!e.isMatchTimerActive)return{};if("playing"!==e.gameState)return{};const n=Math.max(0,e.matchTimeRemaining-t);if(n<=0){const t=e.lives>0;return console.log(t?"üéâ VICTORY! Player survived the match!":"‚è±Ô∏è TIME'S UP! Match ended."),{matchTimeRemaining:0,isMatchTimerActive:!1,gameState:t?"victory":"gameover"}}return{matchTimeRemaining:n}}),stopMatchTimer:()=>{e({isMatchTimerActive:!1}),console.log("‚è±Ô∏è Match timer stopped")},resetGame:()=>{console.log("üîÑ Game reset"),e(Object.assign(Object.assign({},I),{isLoading:!1,showIntroScreen:!1,countdownValue:null}))}}))?P(z):P;var z;let T=0;function k(e,t,n,o,i,a,s,r,l){const c={forward:!1,slide:!1,jump:!1,leftPressed:!1,rightPressed:!1};let d=null;const u={Digit1:"Idle",Digit2:"Run",Digit3:"Slide",Digit4:"Jump",Digit5:"Run_Idle"};let p=0,f=0,g=!1,m=!1,h=null,b=null,x=0,S=0,M=!1;const C={halfWidth:0,halfDepth:0,standingHeight:0,slideHeight:0,centerOffsetY:0,slideCenterOffsetY:0,initialized:!1};let P=null,I=0,z=!1,k=!1,E=0;const O={active:!1,velocity:0,gravity:-488,jumpStrength:163};let L=null;function j(){if(!h||!C.initialized)return null;const e="Slide"===(null==b?void 0:b.currentState),t=e?C.slideHeight:C.standingHeight;let n=e?C.slideCenterOffsetY:C.centerOffsetY;O.active&&(n+=4),e&&(n-=2);const o=new v.Pq0(h.position.x,h.position.y+n,h.position.z),i=.5*t,a={min:new v.Pq0(o.x-C.halfWidth,o.y-i,o.z-C.halfDepth),max:new v.Pq0(o.x+C.halfWidth,o.y+i,o.z+C.halfDepth)};return a}function A(e,t){return!(e.max.x<t.min.x||e.min.x>t.max.x||e.max.y<t.min.y||e.min.y>t.max.y||e.max.z<t.min.z||e.min.z>t.max.z)}function D(t){if(!b)return;const n=b.currentState;if("Fall"===n||"Getup"===n||"Death"===n)return;if(t&&function(t){if(k=!0,E=.25,t&&h){const n=h.position.clone();n.y+=3,function(e,t,n,o={}){var i,a,s,r;const l=null!==(i=o.duration)&&void 0!==i?i:.8,c=null!==(a=o.particleCount)&&void 0!==a?a:120,d=null!==(s=o.color1)&&void 0!==s?s:new v.ov8(.6,.55,.5,.6),u=null!==(r=o.color2)&&void 0!==r?r:new v.ov8(.4,.35,.3,.5),p=new v.okU("dustCloud",c,e);p.particleTexture=new v.gPd("https://raw.githubusercontent.com/BabylonJS/Babylon.js/master/packages/tools/playground/public/textures/cloud.png",e);const f=v.PeD.CreateBox("dustEmitter",{size:.1},e);f.position=t.clone(),f.parent=n,f.isVisible=!1,p.emitter=f,p.color1=d,p.color2=u,p.colorDead=new v.ov8(.3,.28,.25,0),p.minSize=3,p.maxSize=7,p.minLifeTime=.4,p.maxLifeTime=l,p.emitRate=400,p.blendMode=v.okU.BLENDMODE_STANDARD,p.minEmitPower=5,p.maxEmitPower=12,p.updateSpeed=.01,p.createCylinderEmitter(2.5,.5,0),p.direction1=new v.Pq0(-1,-.5,-1),p.direction2=new v.Pq0(1,1.5,1),p.gravity=new v.Pq0(0,-5,0),p.start(),setTimeout(()=>{p.stop()},150),setTimeout(()=>{p.dispose(),f.dispose()},1e3*(l+.5)),console.log("üí® Dust cloud VFX created at",t.toString())}(e,n,t.mesh,{duration:.4,particleCount:60})}console.log("üîô Bounce-back effect triggered!")}(t),R.getState().decrementLives(),R.getState().lives<=0)return console.log("üíÄ GAME OVER - No lives remaining"),O.active=!1,O.velocity=0,I=4,void b.setPlayerState("Death",!0);O.active=!1,O.velocity=0,I=4,b.setPlayerState("Fall",!0);let o=null;t||(z=!0,O.velocity=-50,console.log("üï≥Ô∏è Falling into gap!"),B&&h&&(o=B.position.y-h.position.y,console.log(`üíæ Saved Camera Y Offset: ${o}`)))}const B=new v.VR0("camTarget",e);function _(e){c.forward=!1,c.slide=!1,c.jump=!1,c.leftPressed=!1,c.rightPressed=!1,d=e,e&&b?b.setPlayerState(e,!0):b&&b.setPlayerState("Idle",!0)}function N(e){if(!h||!b)return;if(!b.canStrafe)return;const t=p;p=Math.min(1,Math.max(-1,p+e)),t!==p&&(f=25*p,e>0?b.setPlayerState("Strafe_R"):b.setPlayerState("Strafe_L"))}!function(e,t,n,o,i){v.cng.ImportMesh(null,n,"player.glb",e,(n,a,s,r)=>{var l,c,d,u;if(0===n.length)return void console.error("No meshes loaded from player.glb");const p=new v.VR0("playerRoot",e);n.forEach(e=>{e.parent=p,e.alwaysSelectAsActiveMesh=!0,e.setEnabled(!0),e instanceof v.eaF&&(e.receiveShadows=!0,o.addShadowCaster(e,!0))});const f=null!==(c=null!==(l=n.find(e=>e instanceof v.eaF&&!!e.skeleton))&&void 0!==l?l:n.find(e=>e instanceof v.eaF))&&void 0!==c?c:null,g=null!==(d=null!=f?f:n[0])&&void 0!==d?d:null;p.position=v.Pq0.Zero(),p.scaling=v.Pq0.One(),p.computeWorldMatrix(!0);const m=s[0]||(null==f?void 0:f.skeleton)||null,{min:h,max:b}=p.getHierarchyBoundingVectors(),x=b.y-h.y,y=x>0?16/x:1;p.scaling=new v.Pq0(y,y,y),p.computeWorldMatrix(!0),p.rotate(v._0v.Y,Math.PI,v.$xS.LOCAL),p.computeWorldMatrix(!0);const{min:w,max:S}=p.getHierarchyBoundingVectors(),M=w.add(S).scale(.5);p.position=new v.Pq0(-M.x,.05-w.y,7.5-M.z),p.computeWorldMatrix(!0),g?t.lockedTarget=g:t.setTarget(p.position.clone());const C=null!==(u=r.find(e=>e.targetedAnimations.length>0))&&void 0!==u?u:null;r.forEach(e=>{e!==C&&e.stop()}),i({playerRoot:p,playerSkeleton:m,playerAnimationGroup:C})},void 0,(e,t,n)=>{console.error("Error loading player.glb:",t,n)})}(e,t,n,o,n=>{h=n.playerRoot,x=h.position.y,S=x,t.lockedTarget=B,B.position.copyFrom(h.position),B.position.y-=15;const{min:o,max:a}=n.playerRoot.getHierarchyBoundingVectors(),s=o.subtract(n.playerRoot.position),r=a.subtract(n.playerRoot.position),c=r.x-s.x,d=r.z-s.z,u=r.y-s.y;C.halfWidth=.5*c,C.halfDepth=.5*d,C.standingHeight=u,C.slideHeight=.6*u,C.centerOffsetY=s.y+.5*u,C.slideCenterOffsetY=s.y+.5*C.slideHeight,C.initialized=!0,b=function(e){var t;const{scene:n,playerRoot:o,playerSkeleton:i,animationGroup:a,setScrollSpeed:s}=e;let r="Idle",l=!1,c=!1,d=null,u=null,p=null,f=24;if(a){const e=a.targetedAnimations[0];(null===(t=null==e?void 0:e.animation)||void 0===t?void 0:t.framePerSecond)&&(f=e.animation.framePerSecond)}function g(e,t){if(i){const t=i.getAnimationRange(e);if(t)return{start:t.from,end:t.to}}return{start:t.start,end:t.end}}function m(){d&&p&&(d.onAnimationEndObservable.remove(p),p=null),a&&u&&(a.onAnimationGroupEndObservable.remove(u),u=null),a&&a.stop(),d&&d.stop(),d=null}return i&&Object.keys(y).forEach(e=>{if(!i.getAnimationRange(e)){const{start:t,end:n}=y[e];i.createAnimationRange(e,t,n)}}),{get currentState(){return r},get canStrafe(){return!(!c||"Jump"!==r&&"Fall"!==r)||!1!==y[r].allowStrafe},setPlayerState:function e(t,o=!1){if(!o&&r===t)return;if(!o&&w.has(r))return;const l=y[t],c=g(t,l);if(!i&&!a)return r=t,void s(l.scroll);m(),s(l.scroll);const h=()=>{"Slide"===t?e("Run",!0):"Fall"===t?e("Getup",!0):"Getup"===t?e("Run",!0):"Run_Idle"===t&&e("Idle",!0)};let v=!1;if(a){const e=f/24,t=c.start*e,n=c.end*e;a.reset(),a.start(l.loop,1.5,t,n,!1),v=!0,l.loop||(u=a.onAnimationGroupEndObservable.addOnce(()=>{u=null,h()}))}else i&&(d=n.beginAnimation(i,c.start,c.end,l.loop,1),d&&(v=!0,l.loop||(p=d.onAnimationEndObservable.addOnce(()=>{p=null,h()}))));r=t},setAllowAirStrafe:e=>{c=e},ensureIdle:function(){if(l)return;m(),r="Idle",s(0);const e=g("Idle",y.Idle);if(a){const t=f/24;a.reset(),a.stop(),a.start(!0,1,e.start*t,e.end*t,!0),l=!0,console.log("‚úÖ Player initialized to Idle animation")}else i&&(d=n.beginAnimation(i,e.start,e.end,!0),d&&(l=!0,console.log("‚úÖ Player initialized to Idle animation (skeleton)")))},pauseAnimation:function(){a&&a.pause(),d&&d.pause()},resumeAnimation:function(){a&&a.play(),d&&d.restart()},dispose:function(){m()}}}({scene:e,playerRoot:n.playerRoot,playerSkeleton:n.playerSkeleton,animationGroup:n.playerAnimationGroup,setScrollSpeed:i}),G(),m&&$(),null==l||l()});const F=()=>"playing"===R.getState().gameState;function $(){m=!0,g=!0,R.getState().setGameState("playing"),b&&b.setPlayerState("Run",!0)}function G(){b&&b.ensureIdle()}function V(){h&&b&&(h.position.y=S,x=S,p=0,f=0,h.position.x=0,B&&(B.position.copyFrom(h.position),B.position.y-=15,console.log("üì∑ Camera target reset to default position")),L=null,h.metadata={lastX:h.position.x,lastY:h.position.y,lastZ:h.position.z},g=!1,m=!1,M=!1,z=!1,O.active=!1,O.velocity=0,k=!1,E=0,I=0,b.setPlayerState("Idle",!0),i(0),console.log("Player controller reset"))}e.onBeforeRenderObservable.add(()=>{var t,n,o,l,u,p;if(!h||!b)return;if("paused"===R.getState().gameState)return;const m=R.getState();if(m.isMatchTimerActive&&"playing"===m.gameState){const t=e.getEngine().getDeltaTime()/1e3;m.tickMatchTimer(t)}if("gameover"===m.gameState)return void("Death"!==b.currentState&&(console.log("üéÆ Game Over detected - setting player to Death state"),O.active=!1,O.velocity=0,k=!1,E=0,i(0),b.setPlayerState("Death",!0)));!function(){if(!h||!b)return;if(d)return;const e=b.currentState;"Fall"!==e&&"Getup"!==e&&"Death"!==e&&(c.jump&&!O.active?(b.setPlayerState("Jump"),h&&(O.active||(O.active=!0,O.velocity=O.jumpStrength)),c.jump=!1):c.slide&&b.setPlayerState("Slide"))}();const y=e.getEngine().getDeltaTime()/1e3;I=Math.max(0,I-y),k&&(E-=y,E<=0?(k=!1,E=0,i(0),console.log("‚úÖ Bounce-back effect completed")):i(-240)),h.position.x=v.X5X.Lerp(h.position.x,f,.12),function(){var t,n,o,i,s,r;if(!h)return;if("Fall"===(null==b?void 0:b.currentState)||"Getup"===(null==b?void 0:b.currentState))return void(null==P||P.hide());const l=a.getActivePlatformMeshes().length>0,c=h.position.add(new v.Pq0(0,2,0)),u=new v.RlV(c,new v.Pq0(0,-1,0),40);null==P||P.hide();const p=e.pickWithRay(u,e=>{var t,n,o;return!0===(null===(t=e.metadata)||void 0===t?void 0:t.isCollisionMesh)||"platform"===(null===(n=e.metadata)||void 0===n?void 0:n.obstacleType)||!(!e.parent||"platform"!==(null===(o=e.parent.metadata)||void 0===o?void 0:o.obstacleType))});if((null==p?void 0:p.hit)&&p.pickedPoint&&p.pickedMesh){const e=p.pickedMesh.getBoundingInfo(),a=null==e?void 0:e.boundingBox.minimumWorld,l=null==e?void 0:e.boundingBox.maximumWorld,c=1.5,u=!a||!l||h.position.x>=a.x-c&&h.position.x<=l.x+c,f=!a||!l||h.position.z>=a.z-c&&h.position.z<=l.z+c,g=l.y,m=h.position.y,v=m-g,y=v>=-2&&v<=30;if(p){const e=performance.now();if(e-T>300){T=e,console.log("----- PLATFORM LANDING DEBUG -----"),console.log("Picked Mesh:",null===(t=p.pickedMesh)||void 0===t?void 0:t.name),console.log("isCollisionMesh:",null===(o=null===(n=p.pickedMesh)||void 0===n?void 0:n.metadata)||void 0===o?void 0:o.isCollisionMesh),console.log("PickedPoint Y:",null===(s=null===(i=p.pickedPoint)||void 0===i?void 0:i.y)||void 0===s?void 0:s.toFixed(3)),console.log("Player Y:",h.position.y.toFixed(3));const a=null===(r=p.pickedMesh)||void 0===r?void 0:r.getBoundingInfo();a&&(console.log("bbMinY:",a.boundingBox.minimumWorld.y.toFixed(3)),console.log("bbMaxY:",a.boundingBox.maximumWorld.y.toFixed(3))),console.log("deltaY:",v),console.log("feetY:",m),console.log("platformTopY:",g),console.log("withinX:",u),console.log("withinZ:",f),console.log("platformBelow:",y),console.log("----------------------------------")}}if(u&&f&&y){const e=l.y,t=Math.max(e,S),n=1.5,o=O.active&&O.velocity<=0,i=h.position.y-t<=n;if(!O.active||o&&i)return x=t,h.position.y=Math.max(h.position.y,x),O.active&&(O.active=!1,O.velocity=0,!d&&b&&b.setPlayerState("Run",!0)),void(M=!0)}}if(!l)return M=!1,void(x=S);M?(x=S,(!O.active||O.velocity<=0)&&(O.active=!0,O.velocity=0),M=!1):x=S}(),function(e){if(h){if(!O.active)return z?(O.velocity+=O.gravity*e,void(h.position.y+=O.velocity*e)):void(h.position.y!==x&&(h.position.y=x));O.velocity+=O.gravity*e,h.position.y+=O.velocity*e,h.position.y<=x&&(h.position.y=x,O.active=!1,O.velocity=0,!d&&b&&b.setPlayerState("Run",!0))}}(y),z&&("Getup"!==b.currentState&&"Run"!==b.currentState&&"Idle"!==b.currentState||(z=!1,h.position.y=x,O.velocity=0,r&&r.fillGapAt(h.position.x,h.position.z),B&&null!==L&&(B.position.y=h.position.y+L,console.log(`üîÑ Respawn: Restored Camera Y Offset: ${L}`),L=null),h.metadata=Object.assign(Object.assign({},h.metadata||{}),{lastX:h.position.x,lastY:h.position.y,lastZ:h.position.z}),console.log("‚ú® Recovered from gap fall & repaired road")));const w=R.getState().gameState;if(B&&"playing"===w){const e=h.position.x-(null!==(n=null===(t=h.metadata)||void 0===t?void 0:t.lastX)&&void 0!==n?n:h.position.x),i=h.position.z-(null!==(l=null===(o=h.metadata)||void 0===o?void 0:o.lastZ)&&void 0!==l?l:h.position.z);let a=0;z||(a=h.position.y-(null!==(p=null===(u=h.metadata)||void 0===u?void 0:u.lastY)&&void 0!==p?p:h.position.y),B.position.y+=a),B.position.x+=e,B.position.z+=i}if(h&&(h.metadata=Object.assign(Object.assign({},h.metadata||{}),{lastX:h.position.x,lastY:h.position.y,lastZ:h.position.z})),!d&&"Fall"!==b.currentState&&"Getup"!==b.currentState&&"Death"!==b.currentState&&F()){const e=function(){var e;if(!h||!b)return null;if(I>0)return null;const t=j();if(!t)return null;const n=a.getActiveObstacles();for(const o of n){if(!o.active)continue;const n=o.mesh;n.computeWorldMatrix(!0);const i=(null===(e=o.collisionMeshes)||void 0===e?void 0:e.length)?o.collisionMeshes:[n];for(const e of i){e.computeWorldMatrix(!0);const n=e.getBoundingInfo();if(!n)continue;const i={min:n.boundingBox.minimumWorld,max:n.boundingBox.maximumWorld};if("platform"===o.type){const e=t.min.y>=i.max.y-1.2;if(M||e)continue}if(A(t,i))return o}}return null}();e&&D(e),r&&!O.active&&r.isOverGap(h.position.x,h.position.z)&&(console.log("‚ö†Ô∏è Player fell into gap!"),D());const t=j();if(t){const e=s.checkCollisions(t);if(e>0){console.log("Collected coins:",e);const t=new CustomEvent("coinCollected",{detail:{count:e}});window.dispatchEvent(t)}}}const C=b.currentState,_=Math.abs(h.position.x-f)<.5;g&&_&&("Strafe_L"===C||"Strafe_R"===C)&&b.setPlayerState("Run")});const q={startX:0,startY:0,startTime:0,isDragging:!1};return{handleKeyDown:function(e){const t=u[e.code];if(t)return e.preventDefault(),void _(t);if("Digit0"===e.code)return e.preventDefault(),void _(null);if("KeyP"===e.code){const e=R.getState();return void("playing"===e.gameState?(e.setGameState("paused"),b&&b.pauseAnimation()):"paused"===e.gameState&&(e.setGameState("playing"),b&&b.resumeAnimation()))}if("KeyR"===e.code)return console.log("üîÑ RESTARTING GAME..."),R.getState().resetGame(),a.reset(),s.reset(),V(),$(),void R.getState().startMatchTimer();if(F())switch(e.code){case"ArrowLeft":case"KeyA":c.leftPressed=!0,N(1);break;case"ArrowRight":case"KeyD":c.rightPressed=!0,N(-1);break;case"ArrowDown":case"KeyS":c.slide=!0;break;case"KeyW":c.jump=!0}},handleKeyUp:function(e){switch(e.code){case"ArrowLeft":case"KeyA":c.leftPressed=!1;break;case"ArrowRight":case"KeyD":c.rightPressed=!1;break;case"ArrowDown":case"KeyS":c.slide=!1;break;case"KeyW":c.jump=!1}},handleTouchStart:function(e){if(!F())return;const t=e.touches[0];t&&(q.startX=t.clientX,q.startY=t.clientY,q.startTime=Date.now(),q.isDragging=!0)},handleTouchMove:function(e){F()&&q.isDragging},handleTouchEnd:function(e){if(!F()||!q.isDragging)return;const t=e.changedTouches[0];if(!t)return;const n=t.clientX-q.startX,o=t.clientY-q.startY,i=Date.now()-q.startTime;q.isDragging=!1;const a=Math.sqrt(n*n+o*o);if(a<50&&i<200)return c.jump=!0,void setTimeout(()=>c.jump=!1,100);a>=50&&i<500&&(Math.abs(n)>Math.abs(o)?N(n>0?-1:1):o<0?(c.jump=!0,setTimeout(()=>c.jump=!1,100)):(c.slide=!0,setTimeout(()=>c.slide=!1,500)))},handlePointerDown:function(t){if(!F())return;const n=e.getEngine().getRenderingCanvas();if(!n)return;const o=n.getBoundingClientRect(),i=t.clientX-o.left,a=t.clientY-o.top,s=o.width,r=o.height,l=i<.33*s,d=i>.66*s;a<.33*r&&!l&&!d?c.jump=!0:a>.66*r&&!l&&!d?c.slide=!0:l?N(1):d&&N(-1)},handlePointerUp:function(e){c.slide=!1,c.jump=!1},startGame:$,ensureIdle:G,dispose:function(){P&&(P.dispose(),P=null)},reset:V,cameraTarget:B}}const E=new Map,O={ground:{albedoColor:new v.v9j(.12,.12,.14),metallic:0,roughness:.9},building:{metallic:0,roughness:1},coin:{albedoColor:new v.v9j(1,.8,0),emissiveColor:new v.v9j(.4,.3,0),metallic:1,roughness:.3},obstacle:{metallic:0,roughness:.9},obstacleGLB:{metallic:0,roughness:.85},hamburger:{metallic:0,roughness:.7}},L={jump:{albedo:new v.v9j(.8,.2,.2),emissive:new v.v9j(.2,.05,.05)},duck:{albedo:new v.v9j(.2,.6,.9),emissive:new v.v9j(.05,.15,.25)},platform:{albedo:new v.v9j(.35,.8,.4),emissive:new v.v9j(.08,.2,.1)},insuperable:{albedo:new v.v9j(.5,.2,.8),emissive:new v.v9j(.1,.05,.2)}};function j(e,t){const n=`obstaclePBR_${t}`;if(E.has(n))return E.get(n);const o=L[t]||L.jump,i=new v.YOq(n,e);return i.albedoColor=o.albedo,i.emissiveColor=o.emissive,i.metallic=O.obstacle.metallic,i.roughness=O.obstacle.roughness,E.set(n,i),i}function A(e,t,n){var o,i;const a=e.material;if(a){if(a instanceof v.YOq){const t=a.metallicTexture||a.microSurfaceTexture,n=a.bumpTexture,o=a.reflectivityTexture||a.reflectionTexture;return console.log(`[MaterialFactory] ${e.name}: metallicRoughness=${!!t}, normal=${!!n}, reflectance=${!!o}`),void(t||(a.metallic=O.obstacleGLB.metallic,a.roughness=O.obstacleGLB.roughness))}if(a instanceof v.FUi){const n=new v.YOq(`${a.name}_unified`,t);a.diffuseTexture&&(n.albedoTexture=a.diffuseTexture),a.bumpTexture&&(n.bumpTexture=a.bumpTexture),a.emissiveTexture&&(n.emissiveTexture=a.emissiveTexture),a.ambientTexture&&(n.ambientTexture=a.ambientTexture),a.specularTexture&&(n.reflectivityTexture=a.specularTexture),n.albedoColor=null!==(o=a.diffuseColor)&&void 0!==o?o:v.v9j.White(),n.emissiveColor=null!==(i=a.emissiveColor)&&void 0!==i?i:v.v9j.Black(),n.metallic=O.obstacleGLB.metallic,n.roughness=O.obstacleGLB.roughness,e.material=n}}}new v.v9j(.85,.55,.25),new v.v9j(.35,.2,.1),new v.v9j(1,.8,.2),new v.v9j(.3,.7,.2),new v.v9j(.9,.2,.15),new v.v9j(.95,.92,.8);class D{static preloadAll(e,t){return n=this,o=void 0,a=function*(){if(this.loaded)return;const n=[];for(const o in t){const i=o,a=t[i];for(const t of a){const o=v.cng.LoadAssetContainerAsync("",t,e,null,".glb").then(e=>{this.cache[i].push({container:e,sourceUrl:t})}).catch(e=>{console.error(`Failed to load obstacle GLB [${i}]: ${t}`,e)});n.push(o)}}yield Promise.all(n),this.loaded=!0,console.log("Obstacle GLBs preloaded:",this.cache)},new((i=void 0)||(i=Promise))(function(e,t){function s(e){try{l(a.next(e))}catch(e){t(e)}}function r(e){try{l(a.throw(e))}catch(e){t(e)}}function l(t){var n;t.done?e(t.value):(n=t.value,n instanceof i?n:new i(function(e){e(n)})).then(s,r)}l((a=a.apply(n,o||[])).next())});var n,o,i,a}static getVariantCount(e){const t=this.cache[e];return t?t.length:0}static getMesh(e,t,n){const o=this.cache[e];if(!o||0===o.length)return null;const i=o.length-1,a="number"==typeof n&&n>=0&&n<=i?n:Math.floor(Math.random()*o.length),{container:s,sourceUrl:r}=o[a],l=s.instantiateModelsToScene(e=>e,!1,{doNotInstantiate:!1}).rootNodes[0];if(!l)return console.warn(`Empty GLB container for ${e}`),null;const c=l;c.metadata=c.metadata||{},c.metadata.sourceUrl=r,c.position.setAll(0),"duck"===e&&c.scaling.setAll(1.5),"insuperable"===e&&(c.rotation.z=0),function(e,t){A(e,t);const n=e.getChildMeshes(!1);for(const e of n)A(e,t)}(c,t);let d=[];const u=c.getChildMeshes(!1).filter(e=>e.name.toLowerCase().includes("customcollision"));if(c.name&&c.name.toLowerCase().includes("customcollision")&&u.unshift(c),u.length>0?(console.log(`[ObstacleGLBBuilder] Found ${u.length} custom collision mesh(es) for ${e}`),d=u,d.forEach(e=>{e.isVisible=!1,e.isPickable=!0,e.metadata=e.metadata||{},e.metadata.isCollisionMesh=!0,e.computeWorldMatrix(!0)})):d=[c],c.computeWorldMatrix(!0),1===d.length&&d[0]===c){const{min:e,max:t}=c.getHierarchyBoundingVectors(),n=new v.jLo(e,t);c.setBoundingInfo(n)}return d.forEach(e=>e.computeWorldMatrix(!0)),{root:c,collisionMeshes:d}}}function B(e,t){const n=e.getTotalVertices();if(0===n)return;const o=[];for(let e=0;e<n;e++)o.push(t[0],t[1],t[2],t[3]);e.setVerticesData(v.Rcs.ColorKind,o)}function _(e,t=.75){const n=new v.eaF("obs_hamburger",e),o=[.95,.7,.3,1],i=[.2,.8,.2,1],a=[1,.2,.2,1],s=[.98,.96,.9,1],r=6*t,l=3*t,c=5.5*t,d=1.5*t;let u=0;const p=v.PeD.CreateCylinder("bottomBun",{diameter:2*r,height:l,tessellation:32},e);B(p,o),u=l/2,p.position.y=u,p.parent=n,u+=l/2;const f=v.PeD.CreateCylinder("patty",{diameter:2*c,height:d,tessellation:32},e);B(f,[.4,.2,.1,1]),u+=d/2,f.position.y=u,f.parent=n,u+=d/2;const g=1.8*r,m=v.PeD.CreateBox("cheese",{width:g,height:.3*t,depth:g},e);B(m,[1,.9,.2,1]),u+=.15*t,m.position.y=u,m.rotation.y=Math.PI/4,m.parent=n,u+=.15*t;const h=1.1*r,b=.8*t;u+=b/2;for(let t=0;t<6;t++){const o=v.PeD.CreateBox(`lettuce_${t}`,{width:.8*h,height:b,depth:.5*h},e);B(o,i),o.position.y=u,o.rotation.y=Math.PI/3*t,o.position.x=Math.cos(Math.PI/3*t)*r*.3,o.position.z=Math.sin(Math.PI/3*t)*r*.3,o.parent=n}u+=b/2;const x=4*t,y=.6*t;u+=y/2;const w=v.PeD.CreateCylinder("tomato1",{diameter:2*x,height:y,tessellation:16},e);B(w,a),w.position.y=u,w.position.x=-1.5*t,w.parent=n;const S=v.PeD.CreateCylinder("tomato2",{diameter:2*x,height:y,tessellation:16},e);B(S,a),S.position.y=u,S.position.x=1.5*t,S.parent=n,u+=y/2;const M=v.PeD.CreateSphere("topBun",{diameter:2*r,slice:.5,segments:16},e);B(M,o),M.position.y=u,M.parent=n,[{x:0,z:-2},{x:1.5,z:-1},{x:-1.5,z:-1},{x:2,z:1},{x:-2,z:1},{x:0,z:2},{x:1,z:.5},{x:-1,z:.5}].forEach((o,i)=>{const a=v.PeD.CreateCapsule(`seed_${i}`,{height:.8*t,radius:.2*t},e);B(a,s);const l=o.x*t,c=o.z*t,d=Math.sqrt(l*l+c*c),p=u+.7*Math.sqrt(Math.max(0,r*r-d*d));a.position.set(l,p,c),a.rotation.x=Math.PI/2,a.rotation.z=Math.random()*Math.PI,a.parent=n}),n.position.y=0;const C=n.getChildMeshes();if(C.length>0){const t=v.eaF.MergeMeshes(C,!0,!1,n,!1,!0);if(t)return t.name="obs_hamburger",t.material=function(e){const t="hamburgerUnifiedPBR";if(E.has(t))return E.get(t);const n=new v.YOq(t,e);return n.metallic=0,n.roughness=.9,E.set(t,n),n}(e),t.useVertexColors=!0,t.metadata={isHamburger:!0},t}return n}D.cache={jump:[],duck:[],platform:[],insuperable:[],hamburger:[]},D.loaded=!1;const N="insuperable",F="jump",$="duck",G="platform",V=[[{obstacles:[{type:F,laneIndex:0}],coins:[{laneIndex:0,count:3,spacing:8,yOffset:8}],delayNext:1.5},{obstacles:[{type:N,laneIndex:-1}],coins:[{laneIndex:0,count:3,spacing:8}],delayNext:1.2},{obstacles:[{type:$,laneIndex:1}],coins:[{laneIndex:1,count:3,spacing:8}],delayNext:1.3},{obstacles:[{type:G,laneIndex:0}],coins:[{laneIndex:0,yOffset:15,count:4,spacing:10}],delayNext:2},{obstacles:[],coins:[{laneIndex:-1,count:5,spacing:6}],delayNext:1}],[{obstacles:[{type:F,laneIndex:-1}],coins:[{laneIndex:-1,count:3,spacing:8,yOffset:8}],delayNext:1.5},{obstacles:[{type:F,laneIndex:0}],coins:[{laneIndex:0,count:3,spacing:8,yOffset:8}],delayNext:1.5},{obstacles:[{type:F,laneIndex:1}],coins:[{laneIndex:1,count:3,spacing:8,yOffset:8}],delayNext:1.5},{obstacles:[{type:N,laneIndex:0}],coins:[{laneIndex:1,count:3,spacing:8}],delayNext:1.2},{obstacles:[],coins:[{laneIndex:0,count:5,spacing:6}],delayNext:1}],[{obstacles:[{type:$,laneIndex:-1}],coins:[{laneIndex:-1,count:3,spacing:8}],delayNext:1.3},{obstacles:[{type:$,laneIndex:0}],coins:[{laneIndex:0,count:3,spacing:8}],delayNext:1.3},{obstacles:[{type:F,laneIndex:1}],coins:[{laneIndex:1,count:3,spacing:8,yOffset:8}],delayNext:1.5},{obstacles:[{type:$,laneIndex:1}],coins:[{laneIndex:1,count:3,spacing:8}],delayNext:1.3},{obstacles:[],coins:[{laneIndex:0,count:5,spacing:6}],delayNext:1}],[{obstacles:[{type:N,laneIndex:-1}],coins:[{laneIndex:0,count:3,spacing:8}],delayNext:1.2},{obstacles:[{type:F,laneIndex:0}],coins:[{laneIndex:0,count:3,spacing:8,yOffset:8}],delayNext:1.5},{obstacles:[{type:N,laneIndex:1}],coins:[{laneIndex:0,count:3,spacing:8}],delayNext:1.2},{obstacles:[{type:$,laneIndex:0}],coins:[{laneIndex:0,count:3,spacing:8}],delayNext:1.3},{obstacles:[],coins:[{laneIndex:-1,count:5,spacing:6}],delayNext:1}],[{obstacles:[{type:F,laneIndex:-1}],coins:[{laneIndex:-1,count:3,spacing:8,yOffset:8}],delayNext:1.5},{obstacles:[{type:G,laneIndex:0}],coins:[{laneIndex:0,yOffset:15,count:5,spacing:10}],delayNext:2.2},{obstacles:[{type:N,laneIndex:1}],coins:[{laneIndex:0,count:3,spacing:8}],delayNext:1.2},{obstacles:[{type:$,laneIndex:-1}],coins:[{laneIndex:-1,count:3,spacing:8}],delayNext:1.3},{obstacles:[],coins:[{laneIndex:1,count:5,spacing:6}],delayNext:1}],[{obstacles:[{type:F,laneIndex:-1}],coins:[{laneIndex:-1,count:3,spacing:8,yOffset:8}],delayNext:1.4},{obstacles:[{type:N,laneIndex:1}],coins:[{laneIndex:0,count:3,spacing:8}],delayNext:1.2},{obstacles:[{type:$,laneIndex:-1}],coins:[{laneIndex:-1,count:3,spacing:8}],delayNext:1.3},{obstacles:[{type:F,laneIndex:1}],coins:[{laneIndex:1,count:3,spacing:8,yOffset:8}],delayNext:1.4},{obstacles:[],coins:[{laneIndex:0,count:5,spacing:6}],delayNext:1}]];const q={cubesWide:14,cubesLong:84,cubeSize:12,extraStartRows:6,get roadWidth(){return this.cubesWide*this.cubeSize},get roadLength(){return this.cubesLong*this.cubeSize},segmentCount:3,fallGravity:2500,fallMaxSpeed:4e3,triggerZoneStart:-80,triggerZoneEnd:-200,fallProbabilityPerSecond:.15,maxAdjacentGaps:1,cubeColor:new v.v9j(.15,.15,.2),cubeRoughness:.8};function U(e,t,o,i,a,s){const r=function(e,t,n){let o=q.cubesLong,i=q.roadLength,a=null;const s=new v.YOq("cubeMatRed",e);s.albedoColor=new v.v9j(.2,.2,.2),s.roughness=.9,s.metallic=0;const r=new v.YOq("cubeMatBlack",e);r.albedoColor=new v.v9j(.2,.2,.2),r.roughness=.9,r.metallic=0;const l=v.PeD.CreateBox("fallingCubeSourceRed",{size:q.cubeSize},e);l.material=s,l.isVisible=!1,l.receiveShadows=!0;const c=v.PeD.CreateBox("fallingCubeSourceBlack",{size:q.cubeSize},e);c.material=r,c.isVisible=!1,c.receiveShadows=!0;const d=new v.YOq("shadowCatcherMat",e);d.albedoColor=new v.v9j(1,1,1),d.roughness=1,d.metallic=0,d.alpha=.95;const u=v.PeD.CreateGround("shadowCatcher",{width:600,height:2e3},e);u.material=d,u.position.y=-q.cubeSize-50,u.receiveShadows=!0,u.isPickable=!1;const p=e.onBeforeRenderObservable.add(()=>{const t=e.activeCamera;t&&(u.position.x=.3*t.position.x,u.position.z=t.position.z-600)}),f=[],g=new Map;function m(e){return`${e.segmentIndex}_${e.gridX}_${e.gridZ}`}function h(e,t){return e%3==1&&t%3==1}function b(){for(const e of f)e.instance.dispose();f.length=0,g.clear();const e=-q.roadWidth/2+q.cubeSize/2,n=-q.cubeSize/2;let a=0;for(let s=0;s<q.segmentCount;s++){const r=-s*i,d=0===s?-q.extraStartRows:0;for(let i=0;i<q.cubesWide;i++)for(let u=d;u<o;u++){const o=e+i*q.cubeSize,d=r-u*q.cubeSize-q.cubeSize/2,p=u<0,g=((i+u+s)%2==0?l:c).createInstance(`cube_${s}_${i}_${u}`);g.position=new v.Pq0(o,n,d),g.receiveShadows=!0,t.addShadowCaster(g,!0);const m=h(i,u);m&&a++,f.push({instance:g,state:"active",fallVelocity:0,originalY:n,gridX:i,gridZ:u,segmentIndex:s,isCellCenter:m,randomFallOffset:100*Math.random(),isSafePath:p})}}!function(){console.log("üï∏Ô∏è Weaving safe path...");const e=new Map;for(const t of f){const n=`${t.segmentIndex}_${t.gridZ}`;e.has(n)||e.set(n,new Map),e.get(n).set(t.gridX,t)}let t=7;for(let n=0;n<q.segmentCount;n++)for(let i=0;i<o;i++){const o=`${n}_${i}`,a=e.get(o);if(!a)continue;const s=a.get(t);s&&(s.isSafePath=!0);let r=t+(Math.floor(3*Math.random())-1);r<2&&(r=2),r>11&&(r=11),t=r}}(),console.log(`‚úÖ Created falling cube road: ${f.length} cubes, ${a} cell centers that can fall`)}b();let x=R.getState().lives;const y=R.subscribe(e=>{x=e.lives}),w=e.onBeforeRenderObservable.add(()=>{if("playing"!==R.getState().gameState)return;const t=n();if(0===t)return;const o=e.getEngine().getDeltaTime()/1e3,a=t*o,s=q.segmentCount*i;let r=1/0;for(const e of f)e.instance.position.z<r&&(r=e.instance.position.z);for(const e of f){e.instance.position.z+=a;const t=1.5*q.cubeSize,n=4.5*q.cubeSize,i=6.5,r=t+8*Math.abs(e.gridX-i)+(e.randomFallOffset||0),l=!1;if(!l&&e.instance.position.z>r&&"active"===e.state&&(e.state="falling"),e.instance.position.z>n&&(e.instance.position.z-=s,"active"!==e.state&&(e.state="active",e.fallVelocity=0,e.instance.position.y=e.originalY,e.instance.isVisible=!0,g.delete(m(e)))),"falling"===e.state&&(e.fallVelocity=Math.min(e.fallVelocity+q.fallGravity*o,q.fallMaxSpeed),e.instance.position.y-=e.fallVelocity*o,!(e.instance.position.z>t)&&e.instance.position.y<e.originalY-3*q.cubeSize&&(e.state="fallen",e.instance.isVisible=!1,g.set(m(e),{x:e.instance.position.x,z:e.instance.position.z}))),"active"===e.state&&!l){const t=e.instance.position.z;if(t>q.triggerZoneEnd&&t<q.triggerZoneStart){const t=performance.now()/1e3,n=Math.min(3,1+t/50),i=q.fallProbabilityPerSecond*n*o;if(Math.random()<i&&S(e)){e.state="falling",e.fallVelocity=0;const t=Math.random();let n=[[0,0]];t>.4&&(Math.random()>.5?n.push([1,0]):n.push([0,1])),t>.7&&n.push([1,1]),t>.9&&(n.some(([e,t])=>1===e&&0===t)||n.push([1,0]),n.some(([e,t])=>0===e&&1===t)||n.push([0,1]));for(const[t,o]of n){if(0===t&&0===o)continue;const n=e.gridX+t,i=e.gridZ+o,a=f.find(t=>t.gridX===n&&t.gridZ===i&&t.segmentIndex===e.segmentIndex&&"active"===t.state);a&&M(a)&&(a.state="falling",a.fallVelocity=0)}}}}}});function S(e){if(a&&a(e.instance.position.x,e.instance.position.z,q.cubeSize))return!1;if(e.gridX<2||e.gridX>11)return!1;if(e.isSafePath)return!1;if(e.gridZ%6!=0)return!1;let t=0;for(const n of f)n.gridZ===e.gridZ&&n.segmentIndex===e.segmentIndex&&("falling"!==n.state&&"fallen"!==n.state||t++);return!(t>=1)}function M(e){return!(a&&a(e.instance.position.x,e.instance.position.z,q.cubeSize)||e.gridX<2||e.gridX>11||e.isSafePath)}return{getGapBoundingBoxes:function(){const e=[],t=q.cubeSize/2;for(const[,n]of g)e.push({min:new v.Pq0(n.x-t,-100,n.z-t),max:new v.Pq0(n.x+t,0,n.z+t)});return e},isOverGap:function(e,t){for(const n of f)if("fallen"===n.state){const o=Math.abs(e-n.instance.position.x),i=Math.abs(t-n.instance.position.z);if(o<8&&i<8)return!0}return!1},reset:function(){for(const e of f)e.state="active",e.fallVelocity=0,e.instance.position.y=e.originalY,e.instance.isVisible=!0;g.clear(),console.log("üîÑ Falling cube road reset")},rebuild:function(e){console.log(`üõ†Ô∏è Rebuilding road with target length: ${e}`),o=Math.round(e/q.cubeSize),i=o*q.cubeSize,console.log(`   -> New dimensions: ${o} cubes long = ${i} units`),b()},fillGapAt:function(e,t){const n=q.cubeSize;for(const o of f)if("fallen"===o.state){const i=Math.abs(e-o.instance.position.x),a=Math.abs(t-o.instance.position.z);if(i<n&&a<n)return console.log("ü©π Repairing road gap under player"),o.state="active",o.fallVelocity=0,o.instance.position.y=o.originalY,o.instance.isVisible=!0,void g.delete(m(o))}},setObstacleChecker:e=>{a=e},dispose:function(){e.onBeforeRenderObservable.remove(w),e.onBeforeRenderObservable.remove(p),y();for(const e of f)e.instance.dispose();f.length=0,l.dispose(),c.dispose(),s.dispose(),r.dispose(),u.dispose(),d.dispose(),g.clear(),console.log("üóëÔ∏è Falling cube road disposed")}}}(e,t,a),l=function(e,t,n,o,i){const a=[],s=[];let r=160,l=0;const c=function(e){const t="groundPBR";if(E.has(t))return E.get(t);const n=new v.YOq(t,e);return n.albedoColor=O.ground.albedoColor,n.metallic=O.ground.metallic,n.roughness=O.ground.roughness,E.set(t,n),n}(e),d={offset:0};function u(e){e.uScale=1,e.vScale=Math.max(1,12),e.wrapU=v.gPd.CLAMP_ADDRESSMODE,e.wrapV=v.gPd.WRAP_ADDRESSMODE}const{packagedTex:p,dynamicTex:f}=function(){const t=`${o}fallback-road-texture.png`,n=new v.gPd(t,e,void 0,!1,v.gPd.TRILINEAR_SAMPLINGMODE),i=new v.RCS("roadDyn",{width:1024,height:1024},e,!1),a=i.getContext();if(a){const e=1024;a.fillStyle="#201f2b",a.fillRect(0,0,e,e),a.fillStyle="#14131d",a.fillRect(0,.08*e,e,.84*e),a.fillStyle="#fcd75a";const t=Math.round(.005*e),n=Math.round(.01*e),o=Math.round(1*n),i=(e-t)/2;for(let s=0;s<e;s+=n+o)a.fillRect(i,s,t,n)}return i.update(!1),n.onLoadObservable.addOnce(()=>{u(n),c.albedoTexture=n}),{packagedTex:n,dynamicTex:i}}();c.albedoTexture=f,u(f);let g=f;function m(t,n){const o=v.PeD.CreateGround(`ground-${t}`,{width:350,height:n},e);return o.material=c,o.receiveShadows=!0,o.position.z=-t*n,o.isVisible=!1,o}function h(e,t){a.forEach(e=>e.dispose()),a.length=0,r=e;for(let n=0;n<t;n++){const t=m(n,e);a.push(t)}d.offset=0,u(g)}h(r,6);const b=Array.from({length:10},(e,t)=>`b${t+1}.glb`),x=new Map;function y(n,o,i,a){const s=new v.VR0(o,e);return s.parent=n,s.rotation=new v.Pq0(0,i,0),a.forEach(e=>{const n=e.createInstance(`${e.name}-${o}`);n.parent=s,function(e,t){const n=x.get(t);n&&(e.position=n.pos.clone(),e.scaling=n.scale.clone(),n.rotQ?(e.rotationQuaternion=n.rotQ.clone(),e.rotation=v.Pq0.Zero()):n.rot&&(e.rotation=n.rot.clone(),e.rotationQuaternion=null))}(n,e),n.receiveShadows=!0,t.addShadowCaster(n,!0)}),s}return Promise.all(b.map(t=>v.cng.ImportMeshAsync(null,n,t,e).then(e=>e.meshes.filter(e=>e instanceof v.eaF)))).then(t=>{const n=t.flat();if(0===n.length)return;n.forEach(t=>{var n,o,i,a;if(t.scaling=t.scaling.scale(8),x.set(t,{pos:t.position.clone(),rot:null!==(o=null===(n=t.rotation)||void 0===n?void 0:n.clone())&&void 0!==o?o:null,rotQ:null!==(a=null===(i=t.rotationQuaternion)||void 0===i?void 0:i.clone())&&void 0!==a?a:null,scale:t.scaling.clone()}),!(t.material instanceof v.YOq)){const n=t.material,o=function(e,t){const n="buildingPBR_"+(t?`${t.r.toFixed(2)}_${t.g.toFixed(2)}_${t.b.toFixed(2)}`:"default");if(E.has(n))return E.get(n);const o=new v.YOq(n,e);return o.albedoColor=null!=t?t:v.v9j.White(),o.metallic=O.building.metallic,o.roughness=O.building.roughness,E.set(n,o),o}(e,null==n?void 0:n.diffuseColor);t.material=o}t.isVisible=!1,t.setEnabled(!1)});const o=new v.VR0("buildSeg-0",e);function a(e,t){e.position=new v.Pq0(0,0,-t*l),s.push(e)}y(o,"B_A0",0,n),y(o,"B_B0",Math.PI,n).position.x=-10,o.getHierarchyBoundingVectors(),l=1050,i&&i(l),h(l,6),a(o,0);for(let t=1;t<6;t++){const o=new v.VR0(`buildSeg-${t}`,e);y(o,`B_A${t}`,0,n),y(o,`B_B${t}`,Math.PI,n),a(o,t)}}).catch(e=>console.error("Buildings load error:",e)),{groundSegments:a,buildingSegments:s,groundSpacing:r,buildingSpacing:l,getRoadOffset:()=>d.offset,setRoadOffset:e=>{d.offset=e%1,d.offset<0&&(d.offset+=1)},updateRoadTextureOffset:()=>{g.vOffset=d.offset},advanceGround:function(e){for(const t of a)t.position.z+=e;let t=1/0;for(const e of a)e.position.z<t&&(t=e.position.z);for(const e of a)e.position.z>r&&(e.position.z=t-r)},advanceBuildings:function(e){for(const t of s)t.position.z+=e;let t=1/0;for(const e of s)e.position.z<t&&(t=e.position.z);for(const e of s)e.position.z>l&&(e.position.z=t-l)},rebuildGround:h,dispose:function(){a.forEach(e=>e.dispose()),s.forEach(e=>e.dispose()),f.dispose(),p.dispose(),g.dispose()}}}(e,t,o,i,e=>{console.log(`üèóÔ∏è World spacing ready: ${e}, rebuilding road...`),r.rebuild(e)}),c=function(e,t,n){let o=null;return o=e.onBeforeRenderObservable.add(()=>{const o=R.getState().gameState,i=n();if("playing"!==o&&!("gameover"===o&&i<0))return;const a=e.getEngine().getDeltaTime()/1e3;if(0===i)return;const s=i*a;t.advanceGround(s),t.advanceBuildings(s);const r=t.getRoadOffset()-s/t.groundSpacing;t.setRoadOffset(r),t.updateRoadTextureOffset()}),{dispose:function(){o&&(e.onBeforeRenderObservable.remove(o),o=null)}}}(e,l,a),d=function(e,t,n,o={}){var i,a,s,r;const l=null!==(i=o.spawnZ)&&void 0!==i?i:-520,c=null!==(a=o.despawnZ)&&void 0!==a?a:200,d=null!==(s=o.laneWidth)&&void 0!==s?s:25,u=null!==(r=o.modelPath)&&void 0!==r?r:"/scene/assets/model/coin/Bitcoin.glb",p=new v.VR0("coins_root",e),f=[],g=[];let m=null,h=!1;const b=[];function x(){var n,o;const i=f.find(e=>!e.active);if(i){i.active=!0,i.mesh.setEnabled(!0);const e=null===(o=(n=i.mesh).getChildMeshes)||void 0===o?void 0:o.call(n,!1);return e&&e.forEach(e=>e.setEnabled(!0)),i}const a=function(){if(!m)return null;const n=m.instantiateModelsToScene(e=>`coin_${f.length}_${e}`,!1);if(0===n.rootNodes.length)return console.error("‚ùå No root nodes in coin container"),null;const o=new v.VR0(`coin_root_${f.length}`,e);o.parent=p;for(const e of n.rootNodes)e.parent=o;o.scaling=new v.Pq0(1,1,1);const i=o.getChildMeshes(!1);for(const e of i)if(t.addShadowCaster(e,!0),e.receiveShadows=!0,e.material&&e.material instanceof v.YOq){const t=e.material.clone(`coin_mat_${f.length}_${e.name}`);e.material=t,t.metallic=1,t.roughness=.1,t.albedoColor=new v.v9j(1,.84,0),t.reflectivityColor=new v.v9j(1,.9,.5)}return console.log(`ü™ô Created coin with ${i.length} meshes`),o}();if(!a)return null;const s={mesh:a,active:!0,rotationSpeed:3};return f.push(s),s}function y(e,t,n=1,o=10){const i=e*d;for(let e=0;e<n;e++){const n=x();if(!n)continue;const a=e*o;n.mesh.position.set(i,5+t,l+a),g.push(n)}}function w(e,t){if(0===t)return;const n=t*e;for(let t=g.length-1;t>=0;t--){const o=g[t];o.mesh.position.z+=n,o.mesh.rotation.y+=o.rotationSpeed*e,o.mesh.position.z>c&&(o.active=!1,o.mesh.setEnabled(!1),g.splice(t,1))}}v.cng.LoadAssetContainerAsync(u,"",e).then(e=>{console.log("ü™ô Bitcoin GLB loaded successfully"),console.log(`   Meshes: ${e.meshes.length}`),m=e,h=!0;for(const e of b)y(e.laneIndex,e.yOffset,e.count,e.spacing);b.length=0}).catch(e=>{console.error("‚ùå Failed to load Bitcoin GLB:",e),h=!0});const S=e.onBeforeRenderObservable.add(()=>{const t=R.getState().gameState,o=n();("playing"===t||"gameover"===t&&o<0)&&w(e.getEngine().getDeltaTime()/1e3,o)});return{spawnCoin:function(e,t,n=1,o=10){h&&m?y(e,t,n,o):b.push({laneIndex:e,yOffset:t,count:n,spacing:o})},update:w,checkCollisions:function(e){let t=0;const n=2.5;for(let o=g.length-1;o>=0;o--){const i=g[o],a=i.mesh.position,s=a.x-n,r=a.x+n,l=a.y-n,c=a.y+n,d=a.z-n,u=a.z+n;!(e.max.x<s||e.min.x>r||e.max.y<l||e.min.y>c||e.max.z<d||e.min.z>u)&&(i.active=!1,i.mesh.setEnabled(!1),g.splice(o,1),t++)}return t},dispose:function(){S&&e.onBeforeRenderObservable.remove(S),f.forEach(e=>e.mesh.dispose()),p.dispose()},reset:function(){for(const e of g)e.active=!1,e.mesh.setEnabled(!1);g.length=0,console.log("Coin system reset")},isReady:()=>h}}(e,t,a),u=function(e,t,n){const o=new v.VR0("roadside_cars_root",e),i=[],a=[],s=[];let r=!1;const l=["red_car.glb","green_car.glb","flame_car.glb","white_car.glb"].map(t=>{const n=`scene/assets/model/roadside/${t}`;return v.cng.LoadAssetContainerAsync("",n,e,null,".glb").then(e=>{i.push(e),console.log(`‚úÖ Loaded roadside car: ${t}`)}).catch(e=>{console.warn(`Failed to load car ${t}:`,e)})});function c(){let e=-800;for(;e<0;)d(e),e+=150+200*Math.random()}function d(e){let n=s.find(e=>!e.active);if(!n){const e=function(){if(0===i.length)return null;const e=i[Math.floor(Math.random()*i.length)].instantiateModelsToScene(e=>e,!1,{doNotInstantiate:!1}).rootNodes[0];return e?(e.parent=o,t.addShadowCaster(e,!0),e.getChildMeshes().forEach(e=>{e.receiveShadows=!0}),e):null}();if(!e)return;n={mesh:e,active:!1},s.push(n)}const r=Math.random()<.5?-120:120,l=-120===r?0:Math.PI;n.mesh.position.set(r,-5,e),n.mesh.rotation=new v.Pq0(0,l,0),n.mesh.setEnabled(!0),n.active=!0,a.push(n)}function u(e){const t=R.getState().gameState,o=n();if("playing"!==t&&!("gameover"===t&&o<0))return;if(0===o)return;const i=o*e;for(const e of a)e.mesh.position.z+=i;for(let e=a.length-1;e>=0;e--){const t=a[e];t.mesh.position.z>150&&(t.active=!1,t.mesh.setEnabled(!1),a.splice(e,1))}if(o>0&&r){let e=0;for(const t of a)t.mesh.position.z<e&&(e=t.mesh.position.z);e>-650&&d(e-(150+200*Math.random()))}}Promise.all(l).then(()=>{r=i.length>0,r&&(console.log(`‚úÖ Roadside cars ready (${i.length} variants)`),c())});const p=e.onBeforeRenderObservable.add(()=>{u(e.getEngine().getDeltaTime()/1e3)});return{update:u,dispose:()=>{e.onBeforeRenderObservable.remove(p),s.forEach(e=>e.mesh.dispose()),i.forEach(e=>e.dispose()),o.dispose()},reset:function(){for(const e of a)e.active=!1,e.mesh.setEnabled(!1);a.length=0,r&&c()}}}(e,t,a),p=function(e,t,o,i,a={},s){var r,l,c;const d=null!==(r=a.laneWidth)&&void 0!==r?r:25,u=(a.laneCount,null!==(l=a.spawnZ)&&void 0!==l?l:-400),p=null!==(c=a.despawnZ)&&void 0!==c?c:200,f={jump:j(e,"jump"),duck:j(e,"duck"),platform:j(e,"platform"),insuperable:j(e,"insuperable"),hamburger:j(e,"jump")},g=function(){const e={jump:[],duck:[],platform:[],insuperable:[],hamburger:[]};try{const t=n(44503);t.keys().forEach(n=>{const o=n.replace(/^\.\//,"").split("/");if(o.length>=2){const i=o[0];if(i in e){const o=t(n);e[i].push(o)}}}),console.log("Obstacle Model Scan Results:",e)}catch(e){console.warn("Failed to scan obstacle folders (require.context might not be available):",e)}return e}();let m=!1;D.preloadAll(e,g).then(()=>{m=!0,console.log("‚úÖ Obstacle GLBs ready"),s&&s()});const h=new v.VR0("obstacles_root",e),b={jump:()=>function(e,t){const n=v.PeD.CreateBox("obs_jump",{width:12,height:12,depth:14},e);return n.material=t,n.position.y=6,n}(e,f.jump),duck:()=>function(e,t){const n=v.PeD.CreateBox("obs_duck",{width:18,height:6,depth:10},e);return n.material=t,n.position.y=12,n}(e,f.duck),platform:()=>function(e,t){const n=v.PeD.CreateBox("obs_platform",{width:18,height:15,depth:90},e);return n.material=t,n.position.y=7.5,n}(e,f.platform),insuperable:()=>function(e){const t=_(e,1.5);return t.name="obs_insuperable",t}(e),hamburger:()=>_(e,1)},x=[],y=[];function w(n){let o=!1;"hamburger"!==n&&("jump"===n||"insuperable"===n)&&(o=Math.random()<0);const i=D.getVariantCount(n),a=i>0?Math.floor(Math.random()*i):void 0,s=x.find(e=>e.type===n&&!e.active&&!!e.isHamburgerVariant===o&&(void 0===a||e.variant===a||void 0===e.variant));if(s)return s.active=!0,s.mesh.setEnabled(!0),s;let r=null,l=null,c=a,d=!1;if(o)r=_(e,"insuperable"===n?2:1),l=[r],c=void 0,d=!0;else{const t=void 0!==a?D.getMesh(n,e,a):D.getMesh(n,e);t?(r=t.root,l=t.collisionMeshes):(r=b[n](),l=[r],c=void 0),d=!1}r.parent=h,r.receiveShadows=!0,r.metadata={obstacleType:n,variant:c,isHamburgerVariant:d},t.addShadowCaster(r,!0);const u={mesh:r,collisionMeshes:null!=l?l:[r],type:n,variant:c,isHamburgerVariant:d,active:!0};return x.push(u),u}let S=1,M=V[0],C=0,P=1,I=0,z=0;const T=e.onBeforeRenderObservable.add(()=>{var t;const n=R.getState().gameState,a=o();if("playing"!==n&&!("gameover"===n&&a<0))return;const s=e.getEngine().getDeltaTime()/1e3;if(0===a)return;const r=a*s;for(const e of y)e.mesh.position.z+=r,"insuperable"===e.type&&((null===(t=e.mesh.metadata)||void 0===t?void 0:t.sourceUrl)||"").toLowerCase().includes("soda")&&e.mesh.rotate(v._0v.Y,1.5*s,v.$xS.LOCAL);for(let e=y.length-1;e>=0;e--){const t=y[e];t.mesh.position.z>p&&(t.active=!1,t.mesh.setEnabled(!1),y.splice(e,1))}a>0&&(S+=s,S>=P&&(S=0,function(){var e;if(C>=M.length){const e=Math.floor(Math.random()*V.length);M=V[e],C=0,console.log("Switched to pattern index:",e)}const t=o(),n=M[C];let a=0,s=[!0,!0,!0],r=0;for(const t of n.obstacles){const n=w(t.type),o=t.laneIndex*d,i=t.laneIndex+1;i>=0&&i<=2&&"insuperable"===t.type&&(s[i]=!1);let l=0;"jump"===t.type?l=1.3:"duck"===t.type?l=1:"platform"===t.type&&(l=1.8),l>r&&(r=l);const c=((null===(e=n.mesh.metadata)||void 0===e?void 0:e.sourceUrl)||"").toLowerCase().includes("car"),p=c&&"platform"===n.type?-3:0;n.mesh.position.set(o,n.mesh.position.y+p,u);let f=12;if("platform"===t.type?f=90:"duck"===t.type?f=10:"insuperable"===t.type&&(f=14),f>a&&(a=f),!c||"insuperable"!==n.type&&"platform"!==n.type)n.mesh.rotation.y=0;else{const e=t.laneIndex>=0;n.mesh.rotation.y=e?Math.PI:0}y.push(n)}let l=z,c=999,p=!1,f=[!0,!0,!0];n.obstacles.forEach(e=>{"insuperable"===e.type&&(f[e.laneIndex+1]=!1)});for(let e=-1;e<=1;e++)if(f[e+1]){const t=Math.abs(e-z);t<c&&(c=t,l=e,p=!0)}const g=l,m=g===z,h=.4*Math.abs(g-z);if(n.coins)for(const e of n.coins)i.spawnCoin(e.laneIndex,e.yOffset||0,e.count,e.spacing);const v=performance.now()/1e3,b=Math.max(.4,1-v/300);let x=n.delayNext*b*2,S=0;t>0&&(S=(a+10)/t);let R=0;R=m?I>1.1?I:.6:I+h;let T=Math.max(x,S,R);T<.6&&(T=.6),P=T,I=r,z=g,C++}()))});return{dispose:function(){T&&e.onBeforeRenderObservable.remove(T),x.forEach(e=>e.mesh.dispose()),h.dispose()},getActiveObstacles:function(){return y},getActivePlatformMeshes:function(){return y.filter(e=>"platform"===e.type).map(e=>e.mesh)},reset:function(){y.forEach(e=>{e.active=!1,e.mesh.setEnabled(!1)}),y.length=0,S=0,C=0,P=2;const e=Math.floor(Math.random()*V.length);M=V[e],console.log("Obstacle system reset")},isReady:function(){return m},hasObstacleAt:function(e,t,n){for(const o of y){if(!o.active)continue;const i=e-o.mesh.position.x,a=t-o.mesh.position.z;if(i*i+a*a<n*n)return!0}return!1},isGroundLocked:function(e,t,n){for(const o of y){if(!o.active)continue;if(Math.abs(e-o.mesh.position.x)>=.45*n)continue;const i=o.mesh.position.z;let a=!1;switch(o.type){case"duck":a=t>=i-80&&t<=i+100;break;case"jump":a=t>=i-50&&t<=i+130;break;case"platform":a=t>=i-105&&t<=i+145;break;case"insuperable":a=t>=i-20&&t<=i+60}if(a)return!0}return!1}}}(e,t,a,d,{laneWidth:25,laneCount:3},s);return r.setObstacleChecker((e,t,n)=>p.isGroundLocked(e,t,n)),{dispose:function(){p.dispose(),d.dispose(),u.dispose(),r.dispose(),c.dispose(),l.dispose()},obstacleController:p,coinController:d,fallingCubeRoadController:r}}function Y(e,t,n,o,i){const a=Math.PI/5;e.beginPath();for(let s=0;s<10;s++){const r=s%2==0?i:o,l=s*a-Math.PI/2,c=t+r*Math.cos(l),d=n+r*Math.sin(l);0===s?e.moveTo(c,d):e.lineTo(c,d)}e.closePath(),e.fill()}function W(e){const t=[];let n=!1,o=null;const i=[new v.ov8(1,.2,.2,1),new v.ov8(.2,1,.2,1),new v.ov8(.2,.2,1,1),new v.ov8(1,1,.2,1),new v.ov8(1,.5,0,1),new v.ov8(1,.2,1,1),new v.ov8(0,1,1,1),new v.ov8(1,.8,0,1)];return{startVictory:function(){if(n)return;n=!0,console.log("üéÜüéäüá∫üá∏ Starting victory celebration with American flag!"),o=function(e,t,n={}){var o,i;const a=null!==(o=n.width)&&void 0!==o?o:40,s=null!==(i=n.height)&&void 0!==i?i:25,r=v.PeD.CreateGround("americanFlag",{width:a,height:s,subdivisions:128,updatable:!0},e);r.rotation.x=-Math.PI/2,r.rotation.y=Math.PI,r.position=t;const l=r.getVerticesData(v.Rcs.PositionKind);if(!l)return null;const c=new Float32Array(l),d=function(e){const t=new v.RCS("americanFlag",{width:512,height:320},e,!1),n=t.getContext(),o="#FFFFFF",i=320/13;for(let e=0;e<13;e++)n.fillStyle=e%2==0?"#B22234":o,n.fillRect(0,e*i,512,i);const a=7*i;n.fillStyle="#3C3B6E",n.fillRect(0,0,204.8,a),n.fillStyle=o;const s=[6,5,6,5,6,5,6,5,6];let r=.5*i;for(let e=0;e<s.length;e++){const t=s[e],o=204.8/(t+1),i=e%2==0?0:o/2;for(let e=0;e<t;e++)Y(n,i+o*(e+1),r,4,5);r+=16.410256410256412}return t.update(),t}(e),u=new v.FUi("flagMat",e);u.diffuseTexture=d,u.emissiveTexture=d,u.emissiveColor=new v.v9j(.5,.5,.5),u.specularColor=new v.v9j(.2,.2,.2),u.backFaceCulling=!1,r.material=u;let p=0;const f=e.onBeforeRenderObservable.add(()=>{if(p+=e.getEngine().getDeltaTime()/1e3,!l)return;const t=new Float32Array(l.length);for(let e=0;e<l.length;e+=3){const n=c[e],o=c[e+1],i=c[e+2],s=(n+a/2)/a,r=Math.pow(s,1.5),l=.45*n-.8*p,d=1.5*Math.sin(l)*r,u=.2*o+.3*p,f=Math.sin(u)*(1.5*.2)*r;t[e]=n,t[e+1]=o,t[e+2]=i+d+f}r.updateVerticesData(v.Rcs.PositionKind,t)});return{mesh:r,dispose:function(){e.onBeforeRenderObservable.remove(f),r.dispose(),u.dispose(),d.dispose()}}}(e,new v.Pq0(0,35,-80),{width:50,height:30,segments:40});const a=function(){const n=new v.okU("confetti",800,e),o=new Uint8Array(1024);for(let e=0;e<o.length;e+=4)o[e]=255,o[e+1]=255,o[e+2]=255,o[e+3]=255;const i=v.IvF.CreateRGBATexture(o,16,16,e,!1,!1);n.particleTexture=i;const a=e.activeCamera;return a?a.position:new v.Pq0(0,50,0),n.emitter=new v.Pq0(0,80,-50),n.createBoxEmitter(new v.Pq0(-1,-1,-.5),new v.Pq0(1,-1,.5),new v.Pq0(-80,0,-30),new v.Pq0(80,0,30)),n.color1=new v.ov8(1,.2,.2,1),n.color2=new v.ov8(.2,.2,1,1),n.addColorGradient(0,new v.ov8(1,.3,.3,1)),n.addColorGradient(.25,new v.ov8(.3,1,.3,1)),n.addColorGradient(.5,new v.ov8(.3,.3,1,1)),n.addColorGradient(.75,new v.ov8(1,1,.3,1)),n.addColorGradient(1,new v.ov8(1,.3,1,1)),n.minSize=1,n.maxSize=2.5,n.minLifeTime=4,n.maxLifeTime=8,n.minEmitPower=10,n.maxEmitPower=25,n.gravity=new v.Pq0(0,-15,0),n.minAngularSpeed=-3,n.maxAngularSpeed=3,n.emitRate=150,n.billboardMode=v.okU.BILLBOARDMODE_ALL,n.disposeOnStop=!1,t.push(n),console.log("üéä Confetti shower started"),n}();a.start();let s=0;const r=()=>{if(s>=20||!n)return;const t=120*(Math.random()-.5),o=20+60*Math.random(),a=-60-60*Math.random();!function(t,n){const o=new v.okU("firework",300,e),i=new Uint8Array(4096);for(let e=0;e<32;e++)for(let t=0;t<32;t++){const n=4*(32*e+t),o=t-16,a=e-16,s=Math.sqrt(o*o+a*a),r=Math.max(0,1-s/16);i[n]=255,i[n+1]=255,i[n+2]=255,i[n+3]=Math.floor(255*r)}const a=v.IvF.CreateRGBATexture(i,32,32,e,!1,!1);o.particleTexture=a,o.emitter=t,o.createSphereEmitter(1),o.color1=n,o.color2=new v.ov8(Math.min(1,n.r+.3),Math.min(1,n.g+.3),Math.min(1,n.b+.3),1),o.colorDead=new v.ov8(.5*n.r,.5*n.g,.5*n.b,0),o.minSize=1,o.maxSize=3,o.minLifeTime=.8,o.maxLifeTime=2,o.minEmitPower=30,o.maxEmitPower=60,o.gravity=new v.Pq0(0,-40,0),o.emitRate=500,o.manualEmitCount=150,o.blendMode=v.okU.BLENDMODE_ADD,o.targetStopDuration=.05,o.disposeOnStop=!0,o.start(),console.log(`üéÜ Firework burst at (${t.x.toFixed(0)}, ${t.y.toFixed(0)}, ${t.z.toFixed(0)})`)}(new v.Pq0(t,o,a),i[Math.floor(Math.random()*i.length)]),s++;const l=150+300*Math.random();setTimeout(r,l)};r(),setTimeout(()=>{a&&(a.stop(),setTimeout(()=>{a.dispose();const e=t.indexOf(a);e>-1&&t.splice(e,1)},8e3))},6e3)},stopVictory:function(){n=!1,o&&(o.dispose(),o=null);for(const e of t)e.stop(),setTimeout(()=>e.dispose(),3e3);t.length=0,console.log("üéÜ Victory celebration ended")},dispose:function(){n=!1,o&&(o.dispose(),o=null);for(const e of t)e.dispose();t.length=0},get isActive(){return n}}}v.gSV&&(v.gSV.Configuration={decoder:{wasmUrl:"https://cdn.babylonjs.com/draco_wasm_wrapper_gltf.js",wasmBinaryUrl:"https://cdn.babylonjs.com/draco_wasm_wrapper_gltf.wasm",fallbackUrl:"https://cdn.babylonjs.com/draco_decoder_gltf.js"}});var X=n(74848),Z=n(5338);const H=()=>{const e=R(e=>e.isLoading),t=R(e=>e.dismissIntroScreen);return(0,X.jsxs)("div",{className:"loading-screen",children:[(0,X.jsxs)("div",{className:"intro-image-container",children:[(0,X.jsx)("img",{src:"/intro-screen.png",alt:"Game Instructions",className:"intro-image"}),e&&(0,X.jsxs)("div",{className:"loading-indicator",children:[(0,X.jsx)("div",{className:"loading-spinner"}),(0,X.jsx)("div",{className:"loading-text",children:"Loading..."})]})]}),!e&&(0,X.jsx)("button",{className:"start-button",onClick:()=>{t(),window.dispatchEvent(new KeyboardEvent("keydown",{code:"Space",key:" "}))},"aria-label":"Tap to Start"})]})},K=()=>{const e=R(e=>e.countdownValue);if(null===e)return null;const t=0===e?"GO!":e.toString(),n=0===e;return(0,X.jsx)("div",{className:"countdown-overlay",children:(0,X.jsx)("div",{className:"countdown-number "+(n?"countdown-go":""),children:t},e)})},Q=()=>{const e=R(e=>e.showIntroScreen),t=R(e=>e.coinCount),n=R(e=>e.lives),o=R(e=>e.gameState),i=R(e=>e.activePowerUps),a=R(e=>e.matchTimeRemaining),s=R(e=>e.isMatchTimerActive);return e?(0,X.jsx)(H,{}):(0,X.jsxs)("div",{className:"game-overlay-container",children:[(0,X.jsx)(K,{}),(0,X.jsxs)("div",{className:"top-hud",children:[(0,X.jsxs)("div",{className:"lives-container",children:[(0,X.jsx)("span",{className:"lives-label",children:"Lives:"}),(0,X.jsxs)("div",{className:"hearts-container",children:[Array.from({length:Math.max(0,n)}).map((e,t)=>(0,X.jsx)("span",{className:"heart",children:"‚ù§Ô∏è"},t)),Array.from({length:Math.max(0,3-n)}).map((e,t)=>(0,X.jsx)("span",{className:"empty-heart",children:"üñ§"},`empty-${t}`))]})]}),(0,X.jsxs)("div",{className:"coin-counter",children:[(0,X.jsx)("span",{className:"coin-icon",children:"üü°"}),(0,X.jsx)("span",{className:"coin-count",children:t})]})]}),s&&(0,X.jsxs)("div",{className:"match-timer "+(a<=10?"timer-warning":""),children:["‚è±Ô∏è ",(r=a,`${Math.floor(r/60)}:${Math.floor(r%60).toString().padStart(2,"0")}`)]}),i.length>0&&(0,X.jsx)("div",{className:"powerups-container",children:i.map(e=>(0,X.jsxs)("div",{className:"powerup-icon",children:["‚ö° ",e.type]},e.type))}),"gameover"===o&&(0,X.jsxs)("div",{className:"gameover-overlay",children:[(0,X.jsx)("div",{className:"gameover-text",children:a<=0?"TIME'S UP!":"GAME OVER"}),(0,X.jsx)("div",{className:"gameover-subtext",children:"Press R to restart"}),(0,X.jsx)("button",{className:"reset-button",onClick:()=>{window.location.reload()},style:{marginTop:"20px",padding:"8px 16px",fontSize:"14px",backgroundColor:"rgba(255, 50, 50, 0.9)",color:"white",border:"2px solid rgba(255, 255, 255, 0.5)",borderRadius:"8px",cursor:"pointer",pointerEvents:"auto",textShadow:"1px 1px 2px rgba(0,0,0,0.5)",boxShadow:"0 4px 8px rgba(0,0,0,0.3)"},children:"üîÑ Restart"})]}),"victory"===o&&(0,X.jsxs)("div",{className:"victory-overlay",children:[(0,X.jsx)("div",{className:"victory-text",children:"VICTORY!"}),(0,X.jsxs)("div",{className:"victory-subtext",children:["You survived with ",t," coins!"]}),(0,X.jsx)("button",{className:"reset-button victory-button",onClick:()=>{window.location.reload()},style:{marginTop:"20px",padding:"12px 24px",fontSize:"16px",backgroundColor:"rgba(50, 200, 50, 0.9)",color:"white",border:"3px solid rgba(255, 215, 0, 0.8)",borderRadius:"12px",cursor:"pointer",pointerEvents:"auto",textShadow:"2px 2px 4px rgba(0,0,0,0.5)",boxShadow:"0 6px 12px rgba(0,0,0,0.4), 0 0 20px rgba(255, 215, 0, 0.3)"},children:"üèÜ Play Again"})]})]});var r};window.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("game-canvas");e?(function(){const e=document.getElementById("game-canvas");if(!(e&&e instanceof HTMLCanvasElement))return void console.error("‚ùå Canvas not found - cannot initialize React overlay");const t=document.createElement("div");t.id="react-overlay";const n=()=>{const n=e.getBoundingClientRect();t.style.top=`${n.top}px`,t.style.left=`${n.left}px`,t.style.width=`${n.width}px`,t.style.height=`${n.height}px`};n(),document.body.appendChild(t),new ResizeObserver(()=>{n()}).observe(e),window.addEventListener("resize",n),(0,Z.H)(t).render((0,X.jsx)(S.StrictMode,{children:(0,X.jsx)(Q,{})})),console.log("‚úÖ React overlay initialized and synced with canvas")}(),function(e){if(!e)return;let t=null;const n=()=>{if(!t)return;const n=Math.max(1,e.height/1080);t.setHardwareScalingLevel(Math.min(2.5,n))},o=()=>{const o=9/16,i=window.innerWidth;let a=window.innerHeight,s=a*o;s>i&&(s=i,a=s/o),e.width=s,e.height=a,e.style.width=`${s}px`,e.style.height=`${a}px`,null==t||t.resize(),n()};o(),e.addEventListener("contextmenu",e=>{e.preventDefault()});const{engine:i,scene:a}=function(e){const t=new v.N$8(e,!0);v.VyI.ClearLogCache(),v.VyI.LogLevels=v.VyI.NoneLogLevel;const n=new v.Z58(t);return n.environmentTexture=v.b4q.CreateFromPrefilteredData("https://assets.babylonjs.com/environments/environmentSpecular.env",n),n.environmentIntensity=.4,n.clearColor=new v.ov8(1,1,1,1),{engine:t,scene:n}}(e);t=i,n();const{shadowGenerator:s}=function(e){const t=new v.g4z("hemilight",new v.Pq0(0,1,0),e);t.intensity=.2;const n=new v.ZyN("dirLight",new v.Pq0(-.5,-1,.5),e);n.position=new v.Pq0(20,40,-30),n.intensity=2;const o=new v.owA(2048,n);return o.usePercentageCloserFiltering=!0,o.filteringQuality=v.owA.QUALITY_MEDIUM,o.bias=.001,o.normalBias=.02,n.shadowMinZ=1,n.shadowMaxZ=200,{hemisphericLight:t,directionalLight:n,shadowGenerator:o,setDirectionalLightIntensity:e=>{n.intensity=e}}}(a),{camera:r}=function(e,t){const n=localStorage.getItem("camera_alpha"),o=localStorage.getItem("camera_beta"),i=localStorage.getItem("camera_radius"),a=localStorage.getItem("camera_target_x"),s=localStorage.getItem("camera_target_y"),r=localStorage.getItem("camera_target_z"),l=n?parseFloat(n):Math.PI/2,c=o?parseFloat(o):Math.PI/2.5,d=i?parseFloat(i):200,u=a?parseFloat(a):0,p=s?parseFloat(s):8,f=r?parseFloat(r):0,g=new v.Lqh("camera",l,c,d,new v.Pq0(u,p,f),e);g.fov=1.5,g.attachControl(t,!0);const m=g.inputs.attached.mouse;return m&&(m.useCtrlForPanning=!1,m.buttons=[0,1,2],m.panningMouseButton=2),g.inputs.removeByType("ArcRotateCameraKeyboardMoveInput"),g.keysUp=[],g.keysDown=[],g.keysLeft=[],g.keysRight=[],g.lowerRadiusLimit=20,g.upperRadiusLimit=200,g.panningSensibility=50,g.panningAxis=new v.Pq0(1,1,0),{camera:g}}(a,e),{assetBase:l,modelRoot:c,textureRoot:d}=function(){const e="undefined"!=typeof window?window.location.hostname:"",t=e.endsWith("github.io")||e.endsWith("vercel.app")||e.endsWith(".vercel.app")?"https://media.githubusercontent.com/media/elektrazone/INFIN_BBOY_REPO/main/public/scene/assets/":"scene/assets/";return{assetBase:t,modelRoot:`${t}model/`,textureRoot:`${t}road/`}}(),{skyDome:u}=function(e,t){const n=v.PeD.CreateSphere("skyDome",{diameter:5e3,segments:32,sideOrientation:v.eaF.BACKSIDE},e),o=new v.FUi("skyMat",e),i=new v.gPd(`${t}sky_clouds.jpg`,e,!1,!1,v.gPd.TRILINEAR_SAMPLINGMODE);return i.uScale=8,i.vScale=4,o.diffuseTexture=i,o.emissiveTexture=i,o.emissiveColor=new v.v9j(.5,.5,.5),o.specularColor=new v.v9j(0,0,0),o.backFaceCulling=!1,o.disableLighting=!0,n.material=o,n.isPickable=!1,n.infiniteDistance=!0,n.position=v.Pq0.Zero(),{skyDome:n,skyMaterial:o,cloudTexture:i}}(a,l);u.isVisible=!1;const p=W(a);R.subscribe((e,t)=>{"victory"!==e.gameState||p.isActive?"victory"!==e.gameState&&p.isActive&&p.stopVictory():(console.log("üéÜ Victory celebration triggered!"),p.startVictory())});let f=0,g=!1,m=!1;function h(){g&&m&&(console.log("‚úÖ All assets loaded - ready to start when user taps"),R.getState().setLoading(!1))}let b=!1;R.subscribe(e=>{if(!e.showIntroScreen&&!e.isLoading&&!b){b=!0,console.log("üé¨ User tapped start - beginning countdown");const e=[3,2,1,0];let t=0;const n=()=>{R.getState().setCountdown(e[t]),t++,t<e.length?setTimeout(n,1e3):setTimeout(()=>{R.getState().setCountdown(null),console.log("üèÉ Starting game after countdown"),w.startGame(),R.getState().startMatchTimer(),console.log("‚è±Ô∏è Match timer started (2 minutes)")},500)};n()}});const x=U(a,s,c,d,()=>f,()=>{m=!0,console.log("‚úÖ Obstacles ready"),h()}),y=function(){let e=0;function t(t){e=t,R.getState().updateCoinCount(e)}const n=n=>{const o=n.detail.count;t(e+o)};return window.addEventListener("coinCollected",n),{updateCoinCount:t,dispose:function(){window.removeEventListener("coinCollected",n)}}}(),w=k(a,r,c,s,e=>f=e,x.obstacleController,x.coinController,x.fallingCubeRoadController,()=>{g=!0,console.log("‚úÖ Player ready"),h()});t.runRenderLoop(()=>{w.ensureIdle(),a.render()});const S=()=>o(),M=e=>w.handleKeyDown(e),C=e=>w.handleKeyUp(e),P=e=>w.handleTouchStart(e),I=e=>w.handleTouchMove(e),z=e=>w.handleTouchEnd(e),T=e=>w.handlePointerDown(e),E=e=>w.handlePointerUp(e);window.addEventListener("resize",S);const O={};window.addEventListener("keydown",e=>{if(O[e.key]=!0,e.shiftKey&&"KeyC"===e.code){e.preventDefault(),e.stopPropagation(),console.log("üì∏ CAMERA CAPTURE (Saving to LocalStorage)..."),localStorage.setItem("camera_alpha",r.alpha.toString()),localStorage.setItem("camera_beta",r.beta.toString()),localStorage.setItem("camera_radius",r.radius.toString()),localStorage.setItem("camera_target_x",r.target.x.toString()),localStorage.setItem("camera_target_y",r.target.y.toString()),localStorage.setItem("camera_target_z",r.target.z.toString()),localStorage.setItem("camera_fov",r.fov.toString());const t=`‚úÖ Camera Saved to LocalStorage!\n\nAlpha: ${r.alpha.toFixed(2)} rad\nBeta: ${r.beta.toFixed(2)} rad\nRadius: ${r.radius.toFixed(2)}\nFOV: ${r.fov.toFixed(2)} rad (${(180*r.fov/Math.PI).toFixed(1)}¬∞)\nTarget: (${r.target.x.toFixed(1)}, ${r.target.y.toFixed(1)}, ${r.target.z.toFixed(1)})\n\nRefresh to see it applied.`;return console.log(t),void alert(t)}M(e)}),window.addEventListener("keyup",e=>{O[e.key]=!1,C(e)}),window.addEventListener("touchstart",P,{passive:!0}),window.addEventListener("touchmove",I,{passive:!0}),window.addEventListener("touchend",z,{passive:!0}),window.addEventListener("pointerdown",T),window.addEventListener("pointerup",E);let L=!1,j=null,A="idle",D=null;a.onBeforeRenderObservable.add(()=>{const t=R.getState().gameState;if("playing"===t)return void(L||(r.detachControl(),D&&"paused"===A?(r.alpha=D.alpha,r.beta=D.beta,r.radius=D.radius,r.target.copyFrom(D.targetPosition),console.log("üì∑ Camera state restored (unpause)")):console.log("üì∑ Fresh start - using current camera position"),D=null,j&&(r.lockedTarget=j,j=null),L=!0,console.log("üîí Camera Locked (Playing)")));if(L&&(D={alpha:r.alpha,beta:r.beta,radius:r.radius,targetPosition:r.target.clone()},console.log("üíæ Camera state saved"),r.lockedTarget&&(j=r.lockedTarget,r.lockedTarget=null),r.attachControl(e,!0),L=!1,console.log("üîì Camera Unlocked (Not Playing) - Free orbit enabled")),A=t,"gameover"===t)return;const n=2.5,o=(r.getDirection(v.Pq0.Forward()),r.getDirection(v.Pq0.Right())),i=r.getDirection(v.Pq0.Up());O.ArrowLeft&&r.target.subtractInPlace(o.scale(n)),O.ArrowRight&&r.target.addInPlace(o.scale(n)),O.ArrowUp&&r.target.addInPlace(i.scale(n)),O.ArrowDown&&r.target.subtractInPlace(i.scale(n))}),window.addEventListener("beforeunload",()=>{window.removeEventListener("resize",S),window.removeEventListener("keydown",M),window.removeEventListener("keyup",C),window.removeEventListener("touchstart",P),window.removeEventListener("touchmove",I),window.removeEventListener("touchend",z),window.removeEventListener("pointerdown",T),window.removeEventListener("pointerup",E),x.dispose(),w.dispose(),y.dispose(),v.VyI.ClearLogCache(),v.VyI.LogLevels=v.VyI.AllLogLevel,null==t||t.dispose()})}(e)):console.error("‚ùå Errore: Canvas #game-canvas non trovato.")})},10540:e=>{"use strict";e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},11249:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});var o=n(31601),i=n.n(o),a=n(76314),s=n.n(a)()(i());s.push([e.id,"body {\n  margin: 0;\n  padding: 0;\n  background: black;\n  overflow: hidden;\n}\n\n#game-canvas {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  display: block;\n}\n\n/* ============================================ */\n/* React Overlay Styles */\n/* ============================================ */\n\n#react-overlay {\n  position: fixed;\n  pointer-events: none;\n  z-index: 1000;\n}\n\n/* ============================================ */\n/* Game Overlay Container */\n/* ============================================ */\n\n.game-overlay-container {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  pointer-events: none;\n  user-select: none;\n  z-index: 1000;\n}\n\n/* ============================================ */\n/* Top HUD */\n/* ============================================ */\n\n.top-hud {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  display: flex;\n  justify-content: space-between;\n  padding: 20px;\n}\n\n/* ============================================ */\n/* Lives Display (Top Left) */\n/* ============================================ */\n\n.lives-container {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n}\n\n.lives-label {\n  color: white;\n  font-family: sans-serif;\n  font-size: 20px;\n  font-weight: bold;\n  text-shadow: 2px 2px 0 #000;\n}\n\n.hearts-container {\n  display: flex;\n  gap: 5px;\n}\n\n.heart {\n  font-size: 24px;\n  filter: drop-shadow(2px 2px 0 #000);\n}\n\n.empty-heart {\n  font-size: 24px;\n  opacity: 0.3;\n  filter: drop-shadow(2px 2px 0 #000);\n}\n\n/* ============================================ */\n/* Coin Counter (Top Right) */\n/* ============================================ */\n\n.coin-counter {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n}\n\n.coin-icon {\n  font-size: 24px;\n}\n\n.coin-count {\n  color: white;\n  font-family: sans-serif;\n  font-size: 24px;\n  font-weight: bold;\n  text-shadow: 2px 2px 0 #000;\n}\n\n/* ============================================ */\n/* Power-ups Display (Top Center) */\n/* ============================================ */\n\n.powerups-container {\n  position: absolute;\n  top: 20px;\n  left: 50%;\n  transform: translateX(-50%);\n  display: flex;\n  gap: 10px;\n}\n\n.powerup-icon {\n  padding: 8px 16px;\n  background-color: rgba(255, 215, 0, 0.2);\n  border: 2px solid gold;\n  border-radius: 8px;\n  color: white;\n  font-family: sans-serif;\n  font-size: 16px;\n  font-weight: bold;\n  text-shadow: 1px 1px 0 #000;\n}\n\n/* ============================================ */\n/* Game Over Screen */\n/* ============================================ */\n\n.gameover-overlay {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  text-align: center;\n  pointer-events: auto;\n}\n\n.gameover-text {\n  color: #ff4444;\n  font-family: sans-serif;\n  font-size: 64px;\n  font-weight: bold;\n  text-shadow: 4px 4px 0 #000;\n  margin-bottom: 20px;\n}\n\n.gameover-subtext {\n  color: white;\n  font-family: sans-serif;\n  font-size: 24px;\n  text-shadow: 2px 2px 0 #000;\n}\n\n/* ============================================ */\n/* Victory Screen */\n/* ============================================ */\n\n.victory-overlay {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  text-align: center;\n  pointer-events: auto;\n  animation: victory-pulse 0.5s ease-out;\n}\n\n@keyframes victory-pulse {\n  0% {\n    transform: translate(-50%, -50%) scale(0.5);\n    opacity: 0;\n  }\n\n  50% {\n    transform: translate(-50%, -50%) scale(1.1);\n  }\n\n  100% {\n    transform: translate(-50%, -50%) scale(1);\n    opacity: 1;\n  }\n}\n\n.victory-text {\n  font-family: 'Inter', sans-serif;\n  font-size: 72px;\n  font-weight: 900;\n  background: linear-gradient(180deg, #ffd700 0%, #ff8c00 50%, #ffd700 100%);\n  -webkit-background-clip: text;\n  -webkit-text-fill-color: transparent;\n  background-clip: text;\n  filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.5)) drop-shadow(0 0 30px rgba(255, 215, 0, 0.5));\n  margin-bottom: 20px;\n  animation: victory-glow 1s ease-in-out infinite alternate;\n}\n\n@keyframes victory-glow {\n  0% {\n    filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.5)) drop-shadow(0 0 20px rgba(255, 215, 0, 0.4));\n  }\n\n  100% {\n    filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.5)) drop-shadow(0 0 40px rgba(255, 215, 0, 0.8));\n  }\n}\n\n.victory-subtext {\n  color: white;\n  font-family: 'Inter', sans-serif;\n  font-size: 28px;\n  font-weight: 600;\n  text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8);\n}\n\n/* ============================================ */\n/* Loading Screen */\n/* ============================================ */\n\n.loading-screen {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background: linear-gradient(180deg, #2c1810 0%, #4a2c1a 30%, #8b4513 70%, #2c1810 100%);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 2000;\n}\n\n.intro-image-container {\n  position: relative;\n  width: 100%;\n  height: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.intro-image {\n  width: 100%;\n  height: 100%;\n  object-fit: cover;\n  object-position: center;\n}\n\n.loading-indicator {\n  position: absolute;\n  bottom: 40px;\n  left: 50%;\n  transform: translateX(-50%);\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 12px;\n  background: transparent;\n  padding: 16px 32px;\n  border-radius: 12px;\n}\n\n.loading-content {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 24px;\n}\n\n.loading-spinner {\n  width: 40px;\n  height: 40px;\n  border: 3px solid rgba(255, 255, 255, 0.2);\n  border-top: 3px solid #ffd700;\n  border-radius: 50%;\n  animation: spin 1s linear infinite;\n}\n\n@keyframes spin {\n  0% {\n    transform: rotate(0deg);\n  }\n\n  100% {\n    transform: rotate(360deg);\n  }\n}\n\n.loading-text {\n  color: white;\n  font-family: 'Inter', 'Segoe UI', sans-serif;\n  font-size: 18px;\n  font-weight: 600;\n  letter-spacing: 2px;\n  text-transform: uppercase;\n  text-shadow: 0 2px 10px rgba(255, 215, 0, 0.5);\n  animation: pulse 1.5s ease-in-out infinite;\n}\n\n@keyframes pulse {\n\n  0%,\n  100% {\n    opacity: 1;\n  }\n\n  50% {\n    opacity: 0.5;\n  }\n}\n\n/* Start Button - Invisible overlay covering TAP TO START area */\n.start-button {\n  position: absolute;\n  bottom: 0;\n  left: 50%;\n  transform: translateX(-50%);\n  width: 80%;\n  height: 12%;\n  background: transparent;\n  border: none;\n  cursor: pointer;\n  pointer-events: auto;\n  outline: none;\n  z-index: 2001;\n  -webkit-tap-highlight-color: transparent;\n}\n\n.start-button:hover {\n  background: transparent;\n}\n\n.start-button:active {\n  background: transparent;\n}\n\n/* ============================================ */\n/* Countdown Overlay */\n/* ============================================ */\n\n.countdown-overlay {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 1500;\n  pointer-events: none;\n}\n\n.countdown-number {\n  font-family: 'Inter', 'Segoe UI', sans-serif;\n  font-size: 150px;\n  font-weight: 900;\n  color: #ffa500;\n  background: linear-gradient(180deg, #ffdd00 0%, #ff8c00 100%);\n  -webkit-background-clip: text;\n  -webkit-text-fill-color: transparent;\n  background-clip: text;\n  filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.5)) drop-shadow(0 0 20px rgba(255, 165, 0, 0.5));\n  animation: countdown-zoom 0.9s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards;\n}\n\n.countdown-go {\n  color: #4ade80;\n  text-shadow:\n    0 0 20px rgba(74, 222, 128, 0.5),\n    0 0 40px rgba(74, 222, 128, 0.3),\n    0 4px 8px rgba(0, 0, 0, 0.5);\n}\n\n@keyframes countdown-zoom {\n  0% {\n    transform: scale(0.3);\n    opacity: 0;\n  }\n\n  20% {\n    opacity: 1;\n  }\n\n  70% {\n    transform: scale(1.1);\n    opacity: 1;\n  }\n\n  100% {\n    transform: scale(1.0);\n    opacity: 0;\n  }\n}\n\n/* ============================================ */\n/* Match Timer */\n/* ============================================ */\n\n.match-timer {\n  position: absolute;\n  top: 20px;\n  left: 50%;\n  transform: translateX(-50%);\n  font-family: 'Inter', 'Segoe UI', sans-serif;\n  font-size: 2rem;\n  font-weight: bold;\n  color: #fff;\n  text-shadow:\n    2px 2px 4px rgba(0, 0, 0, 0.8),\n    0 0 10px rgba(255, 255, 255, 0.3);\n  pointer-events: none;\n  z-index: 100;\n  padding: 8px 16px;\n  background: rgba(0, 0, 0, 0.3);\n  border-radius: 8px;\n}\n\n.match-timer.timer-warning {\n  color: #ff4444;\n  animation: pulse-warning 0.5s ease-in-out infinite;\n  text-shadow:\n    2px 2px 4px rgba(0, 0, 0, 0.8),\n    0 0 15px rgba(255, 68, 68, 0.6);\n}\n\n@keyframes pulse-warning {\n\n  0%,\n  100% {\n    transform: translateX(-50%) scale(1);\n  }\n\n  50% {\n    transform: translateX(-50%) scale(1.1);\n  }\n}",""]);const r=s},31470:(e,t,n)=>{"use strict";e.exports=n.p+"scene/assets/model/obstacles/platform/BUS.glb"},31601:e=>{"use strict";e.exports=function(e){return e[1]}},39012:(e,t,n)=>{"use strict";e.exports=n.p+"scene/assets/model/obstacles/insuperable/Soda_new1.glb"},41113:e=>{"use strict";e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},44503:(e,t,n)=>{var o={"./duck/Onion_slices.glb":83887,"./insuperable/Fries_new.glb":65115,"./insuperable/Soda_new1.glb":39012,"./jump/Burger.glb":82218,"./platform/BUS.glb":31470};function i(e){var t=a(e);return n(t)}function a(e){if(!n.o(o,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return o[e]}i.keys=function(){return Object.keys(o)},i.resolve=a,e.exports=i,i.id=44503},55056:(e,t,n)=>{"use strict";e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},65115:(e,t,n)=>{"use strict";e.exports=n.p+"scene/assets/model/obstacles/insuperable/Fries_new.glb"},76314:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var n="",o=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),o&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),o&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n}).join("")},t.i=function(e,n,o,i,a){"string"==typeof e&&(e=[[null,e,void 0]]);var s={};if(o)for(var r=0;r<this.length;r++){var l=this[r][0];null!=l&&(s[l]=!0)}for(var c=0;c<e.length;c++){var d=[].concat(e[c]);o&&s[d[0]]||(void 0!==a&&(void 0===d[5]||(d[1]="@layer".concat(d[5].length>0?" ".concat(d[5]):""," {").concat(d[1],"}")),d[5]=a),n&&(d[2]?(d[1]="@media ".concat(d[2]," {").concat(d[1],"}"),d[2]=n):d[2]=n),i&&(d[4]?(d[1]="@supports (".concat(d[4],") {").concat(d[1],"}"),d[4]=i):d[4]="".concat(i)),t.push(d))}},t}},77659:e=>{"use strict";var t={};e.exports=function(e,n){var o=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(n)}},82218:(e,t,n)=>{"use strict";e.exports=n.p+"scene/assets/model/obstacles/jump/Burger.glb"},83887:(e,t,n)=>{"use strict";e.exports=n.p+"scene/assets/model/obstacles/duck/Onion_slices.glb"},85072:e=>{"use strict";var t=[];function n(e){for(var n=-1,o=0;o<t.length;o++)if(t[o].identifier===e){n=o;break}return n}function o(e,o){for(var a={},s=[],r=0;r<e.length;r++){var l=e[r],c=o.base?l[0]+o.base:l[0],d=a[c]||0,u="".concat(c," ").concat(d);a[c]=d+1;var p=n(u),f={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==p)t[p].references++,t[p].updater(f);else{var g=i(f,o);o.byIndex=r,t.splice(r,0,{identifier:u,updater:g,references:1})}s.push(u)}return s}function i(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,i){var a=o(e=e||[],i=i||{});return function(e){e=e||[];for(var s=0;s<a.length;s++){var r=n(a[s]);t[r].references--}for(var l=o(e,i),c=0;c<a.length;c++){var d=n(a[c]);0===t[d].references&&(t[d].updater(),t.splice(d,1))}a=l}}},97825:e=>{"use strict";e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var o="";n.supports&&(o+="@supports (".concat(n.supports,") {")),n.media&&(o+="@media ".concat(n.media," {"));var i=void 0!==n.layer;i&&(o+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),o+=n.css,i&&(o+="}"),n.media&&(o+="}"),n.supports&&(o+="}");var a=n.sourceMap;a&&"undefined"!=typeof btoa&&(o+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),t.styleTagTransform(o,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}}},e=>{e.O(0,[645,967],()=>e(e.s=4632)),e.O()}]);